<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Login</title>
		<link rel="stylesheet" type="text/css" href="main.css">
		<script type='text/javascript' src='https://cdn.firebase.com/js/client/1.0.11/firebase.js'></script>
		<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js"></script>
		<script type='text/javascript' src='http://code.jquery.com/jquery-1.11.0.min.js'></script>
  		<script>
    		WebFont.load({
      			google: {
        			families: ["Exo:100,200,300,400,500,600,700,800,900"]
		      }
		    });
	  </script>
	</head>
		<body>
			
			<div class="nav-bar">
				<a class="nav-text">LOGIN</a>
			</div>
			<div>
			<div class="login-form">
				<div class="login-header"><p class="title">Sign up to play</p></div>
				
				<div class="content">
					<input name="username" type="text" id="usernameInput" placeholder="username" />
				<input name="password" type="password" id="passwordInput" placeholder="password" />
				</div>

				<div class="register-button">
					<div class="reg-button" id="reg-bttn">Register</div>
				</div>
			</div>
			</div>
		</body>
		<script>
			var db = new Firebase('https://blistering-fire-1331.firebaseio.com/');

			$("#reg-bttn").click(function(e) {
				e.stopPropagation();
				e.preventDefault();
				db.on('value', function(dataSnapshot) {
					var username = $("#usernameInput").val();
					console.log(username);
				  	if (dataSnapshot.hasChild(username)) {
				  		alert("Sorry! username is taken");
						return;
				  	}
				  	var password = $("#passwordInput").val();
					console.log(password);
					dataSnapshot.child(username).ref().set({ password: password }, function(error) {
						if (error) alert("Firebase returned an error");
						else {
							console.log("redirecting");
							//window.location.href = "file:///Users/Mishq/Documents/FlagTag/ranks.html";
						}
					});
				});
			});

		</script>
</html>